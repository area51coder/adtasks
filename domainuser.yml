- name: Ensure user is created and use custom credentials to create the user 
  microsoft.ad.user: 
    identity: "{{ account_name }}"
    firstname: "{{ user_first_name }}"
    surname: "{{ user_last_name }}" 
    password: "{{ lookup('password', '/dev/null length=24 chars=ascii_letters,digits,special') }}" 
    path: ou=group,dc=domain,dc=com 
    state: present 
    domain_username: "{{ domain_username}}" 
    domain_password: "{{ domain_password }}" 
    domain_server: "{{ domain_controller }}" 
  delegate_to: localhost
